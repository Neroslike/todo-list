import Component from "../Component";
import Project from "../project";
import modal from "../modal";
import Neros from "../Neros";
import ProjectComponent from "./ProjectComponent";

export class NewProjectComponent extends Component {
  constructor(name) {
    super();
    this.name = name;
  }

  template = () =>
    `
    <div class='newProjectContainer'>
      <h1>Create new Project</h1>
      <form class='newForm'>
        <div class='field TitleField'>
        <label for='Title'>Project Title</label>
        <input type='text' name='Title' id='Title'>
        </div>
        <button class='createButton' type='button'>Create</button>
      </form>
    </div>
  `;

  DOMelement() {
    let element = super.DOMelement();
    let button = element.querySelector("button");
    let form = element.querySelector("form");
    button.addEventListener("click", () => {
      this.createProject(form);
    });
    return element;
  }

  createProject(form) {
    let title = form.Title.value;
    let project = new Project(title);
    Neros.projects.registerComponent(project.component);
    // Select newly created project
    ProjectComponent.selectLastProject();
    modal.hide();
  }
}
